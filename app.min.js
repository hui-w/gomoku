function Button(d,c,b,a){Component(this,d,c,b,a);this.type="button";this.isOn=false;this.capturedPosition=null;this.onClick=[];this.init()}Button.prototype={init:function(){this.renderExtra.push(function(a,b){b.beginPath();b.moveTo(0,0);b.lineTo(a.width,0);b.lineTo(a.width,a.height);b.lineTo(0,a.height);b.closePath();if(a.capturedPosition||a.isOn){b.fillStyle="#B5B5B5";b.strokeStyle="#979797"}else{b.fillStyle="#EBEBEB";b.strokeStyle="#979797"}b.fill();b.stroke()})},setOn:function(a){if(this.isOn===a){return}this.isOn=a;this.requestRedraw()},isPointInside:function(b,a){return b>=this.left&&b<=this.left+this.width&&a>=this.top&&a<=this.top+this.height},onCapture:function(b,a){if(!this.isPointInside(b,a)){return}this.capturedPosition={left:b,top:a};this.requestRedraw()},onRelease:function(d,c){if(!this.capturedPosition){return}if(this.isPointInside(d,c)){if(typeof this.onClick=="function"){this.onClick()}else{if(typeof this.onClick=="object"){for(var a=0;a<this.onClick.length;a++){var b=this.onClick[a];if(typeof b=="function"){b()}}}}}this.capturedPosition=null;this.requestRedraw()},onDrag:function(b,a){}};function Component(f,e,d,b,a){for(key in Component.prototype){var c=Component.prototype[key];if(typeof c==="function"){f[key]=c}else{f[key]=JSON.parse(JSON.stringify(c))}}f.left=e;f.top=d;f.width=b;f.height=a}Component.prototype={type:null,left:0,top:0,width:0,height:0,fillStyle:null,strokeStyle:null,lineWidth:0,renderExtra:[],onRequestRedraw:null,setPosition:function(b,a){this.left=b;this.top=a;this.requestRedraw()},setSize:function(b,a){this.width=b;this.height=a;this.requestRedraw()},setStrokeStyle:function(a){this.strokeStyle=a;this.requestRedraw()},setLineWidth:function(a){this.lineWidth=a;this.requestRedraw()},setFillStyle:function(a){this.fillStyle=a;this.requestRedraw()},requestRedraw:function(){if(typeof this.onRequestRedraw=="function"){this.onRequestRedraw()}},render:function(c){c.save();c.translate(this.left,this.top);if(this.fillStyle){c.fillStyle=this.fillStyle;c.fillRect(0,0,this.width,this.height)}if(this.strokeStyle&&this.lineWidth>0){c.lineWidth=this.lineWidth;c.strokeStyle=this.strokeStyle;c.strokeRect(0,0,this.width,this.height)}if(typeof this.renderExtra=="function"){this.renderExtra(this,c)}else{if(typeof this.renderExtra=="object"){for(var b=0;b<this.renderExtra.length;b++){var a=this.renderExtra[b];if(typeof a=="function"){a(this,c)}}}}c.restore()}};function Label(b,a,c){Component(this,b,a,0,0);this.type="label";this.font={size:12,face:"Arial, Helvetica, sans-serif",color:"#000000"};this.init();this.text=c;this.horizontalAlign="left";this.verticalAlign="top"}Label.prototype={init:function(){this.renderExtra.push(function(a,b){b.fillStyle=a.font.color;b.font=a.font.size+"px "+a.font.face;b.fillTextEx(a.text,0,0,a.horizontalAlign,a.verticalAlign)})},setHorizontalAlign:function(a){if(a===this.horizontalAlign){return}this.horizontalAlign=a;this.requestRedraw()},setVerticalAlign:function(a){if(a===this.verticalAlign){return}this.verticalAlign=a;this.requestRedraw()},setText:function(a){if(a===this.text){return}this.text=a;this.requestRedraw()}};function Panel(d,c,b,a){Component(this,d,c,b,a);this.type="panel";this.init()}Panel.prototype={init:function(){}};function UIManager(){this.components=[];this.redrawHandler=null;this.delayTimer=null}UIManager.prototype={setRedrawHandler:function(a){this.redrawHandler=a},registerComponent:function(a){var b=this;a.onRequestRedraw=function(){b.requestRedraw()};this.components.push(a)},redrawComponents:function(b){for(var a=0;a<this.components.length;a++){if(typeof this.components[a].render==="function"){this.components[a].render(b)}}},dispatchEvent:function(){var c=arguments[0];for(var b=0;b<this.components.length;b++){var a=this.components[b];switch(c){case"capture":var e=arguments[1];var d=arguments[2];if(typeof a.onCapture==="function"){a.onCapture(e,d)}break;case"drag":var e=arguments[1];var d=arguments[2];if(typeof a.onCapture==="function"){a.onDrag(e,d)}break;case"release":var e=arguments[1];var d=arguments[2];if(typeof a.onCapture==="function"){a.onRelease(e,d)}break}}},requestRedraw:function(){var a=this;if(this.delayTimer){return}this.delayTimer=setTimeout(function(){a.redrawHandler();a.delayTimer=null},50)}};function App(){var b=this;this.width=0;this.height=0;this.cellSize=0;this.canvas=null;this.context=null;this.chessboard=new Chessboard();var a=Config.Button.size;this.playerIndicator=new Panel(0,0,a,a);this.btnNew=new Button(0,0,a,a);this.btnNew.renderExtra.push(function(c,d){d.beginPath();d.moveTo(a/4,a/2);d.lineTo(a-a/4,a/2);d.moveTo(a/2,a/4);d.lineTo(a/2,a-a/4);d.strokeStyle="#000";d.stroke()});this.btnNew.onClick=function(){b.chessboard.reset()};this.btnBack=new Button(0,0,a,a);this.btnBack.renderExtra.push(function(c,d){d.beginPath();d.moveTo(a/4,a/2);d.lineTo(a-a/4,a/2);d.moveTo(a/2,a/4);d.lineTo(a/4,a/2);d.lineTo(a/2,a-a/4);d.strokeStyle="#000";d.stroke()});this.btnBack.onClick=function(){b.chessboard.back()};this.btnBotBlack=new Button(0,0,a,a/2);this.btnBotBlack.renderExtra.push(function(c,d){d.drawStone(true,a/4,0,a/4)});this.btnBotBlack.onClick=function(){b.chessboard.setRobot("black",!b.chessboard.robotConfig.black)};this.btnBotWhite=new Button(0,0,a,a/2);this.btnBotWhite.renderExtra.push(function(c,d){d.drawStone(false,a/4,0,a/4)});this.btnBotWhite.onClick=function(){b.chessboard.setRobot("white",!b.chessboard.robotConfig.white)};this.lblCurrent=new Label(0,0,"Player");this.lblCurrent.setHorizontalAlign("center");this.lblCurrent.setVerticalAlign("bottom");this.lblNew=new Label(0,0,"New");this.lblNew.setHorizontalAlign("center");this.lblNew.setVerticalAlign("bottom");this.lblBack=new Label(0,0,"Back");this.lblBack.setHorizontalAlign("center");this.lblBack.setVerticalAlign("bottom");this.lblRobot=new Label(0,0,"Robot");this.lblRobot.setHorizontalAlign("center");this.lblRobot.setVerticalAlign("bottom");this.uiManager=new UIManager();this.uiManager.setRedrawHandler(function(){b.redraw()});this.uiManager.registerComponent(this.chessboard);this.uiManager.registerComponent(this.playerIndicator);this.uiManager.registerComponent(this.btnNew);this.uiManager.registerComponent(this.btnBack);this.uiManager.registerComponent(this.btnBotBlack);this.uiManager.registerComponent(this.btnBotWhite);this.uiManager.registerComponent(this.lblCurrent);this.uiManager.registerComponent(this.lblNew);this.uiManager.registerComponent(this.lblBack);this.uiManager.registerComponent(this.lblRobot);this.init()}App.prototype={init:function(){var a=this;this.width=document.documentElement.clientWidth;this.height=document.documentElement.clientHeight;this.render()},render:function(){var b=this;var a=document.body;var d=a.createChild("div",{id:"app-wrapper",style:"padding: "+Config.Canvas.margin+"px"});this.canvas=d.createChild("canvas",{id:"app-canvas",width:0,height:0});if(typeof G_vmlCanvasManager!="undefined"){this.canvas=G_vmlCanvasManager.initElement(this.canvas)}this.context=this.canvas.getContext("2d");this.handleMouseEvent=function(f){b.handleMouse(f,b)};this.canvas.addEventListener("mousedown",this.handleMouseEvent,false);this.canvas.addEventListener("mousemove",this.handleMouseEvent,false);this.canvas.addEventListener("mouseup",this.handleMouseEvent,false);this.handleTouchEvent=function(f){b.handleTouch(f,b)};this.canvas.addEventListener("touchstart",this.handleTouchEvent,false);this.canvas.addEventListener("touchend",this.handleTouchEvent,false);this.canvas.addEventListener("touchmove",this.handleTouchEvent,false);this.resizeCanvas();function c(){var f=document.documentElement.clientWidth;var e=document.documentElement.clientHeight;if(f!=b.width||e!=b.height){b.width=f;b.height=e;b.resizeCanvas()}}setInterval(c,200)},resizeCanvas:function(){this.canvas.width=this.width-Config.Canvas.margin*2;this.canvas.height=this.height-Config.Canvas.margin*2;var e=(this.canvas.width>this.canvas.height?this.canvas.height:this.canvas.width)-Config.Canvas.padding*2;var d=Math.abs(this.canvas.width-this.canvas.height);var c=Config.Button.size+Config.Button.margin*2;if(d<c){e-=c-d}this.chessboard.setPaintingArea(Config.Canvas.padding,Config.Canvas.padding,e);var b=4;var a=Config.Button.size*b+Config.Button.margin*(b-1);if(this.canvas.width>this.canvas.height){var g=Config.Canvas.padding+e+Config.Button.margin;var f=Math.floor((this.canvas.height-a)/2);this.lblCurrent.setPosition(g+Config.Button.size/2,f-2);this.playerIndicator.setPosition(g,f);f+=Config.Button.size+Config.Button.margin;this.lblNew.setPosition(g+Config.Button.size/2,f-2);this.btnNew.setPosition(g,f);f+=Config.Button.size+Config.Button.margin;this.lblBack.setPosition(g+Config.Button.size/2,f-2);this.btnBack.setPosition(g,f);f+=Config.Button.size+Config.Button.margin;this.lblRobot.setPosition(g+Config.Button.size/2,f-2);this.btnBotBlack.setPosition(g,f);f+=Config.Button.size/2;this.btnBotWhite.setPosition(g,f)}else{var g=Math.floor((this.canvas.width-a)/2);var f=Config.Canvas.padding+e+Config.Button.margin;this.lblCurrent.setPosition(g+Config.Button.size/2,f-2);this.playerIndicator.setPosition(g,f);g+=Config.Button.size+Config.Button.margin;this.lblNew.setPosition(g+Config.Button.size/2,f-2);this.btnNew.setPosition(g,f);g+=Config.Button.size+Config.Button.margin;this.lblBack.setPosition(g+Config.Button.size/2,f-2);this.btnBack.setPosition(g,f);g+=Config.Button.size+Config.Button.margin;this.lblRobot.setPosition(g+Config.Button.size/2,f-2);this.btnBotBlack.setPosition(g,f);f+=Config.Button.size/2;this.btnBotWhite.setPosition(g,f)}this.uiManager.requestRedraw()},redraw:function(){var a=this;this.canvas.width=this.canvas.width;this.canvas.height=this.canvas.height;this.playerIndicator.renderExtra=function(b,c){c.drawStone(a.chessboard.isBlack(),0,0,Math.floor(b.width/2))};this.btnBotBlack.setOn(this.chessboard.robotConfig.black);this.btnBotWhite.setOn(this.chessboard.robotConfig.white);this.context.save();this.context.fillStyle=Config.Canvas.fill;this.context.fillRect(0,0,this.canvas.width,this.canvas.height);this.context.restore();this.uiManager.redrawComponents(this.context);console.log("- canvas redraw")},handleMouse:function(b,a){switch(b.type){case"mousedown":a.capture(b);break;case"mousemove":a.drag(b);break;case"mouseup":a.release(b);break}},handleTouch:function(b,a){b.preventDefault();switch(b.type){case"touchstart":if(b.touches.length==1){a.capture(b.targetTouches[0])}else{if(b.touches.length==2){}}break;case"touchend":if(b.changedTouches.length==1){a.release(b.changedTouches[0])}break;case"touchmove":if(b.changedTouches.length==1){a.drag(b.changedTouches[0])}else{if(b.touches.length==2){}}break}},capture:function(a){var b=this.getEventPosition(a);this.uiManager.dispatchEvent("capture",b.left,b.top)},drag:function(a){var b=this.getEventPosition(a);this.uiManager.dispatchEvent("drag",b.left,b.top)},release:function(a){var b=this.getEventPosition(a);this.uiManager.dispatchEvent("release",b.left,b.top)},getEventPosition:function(a){return{left:a.pageX-this.canvas.offsetLeft,top:a.pageY-this.canvas.offsetTop}}};var app=null;addEventListener("load",function(){app=new App()});function Chessboard(){this.left=0;this.top=0;this.size=0;this.width=0;this.height=0;this.unitSize=0;this.halfSize=0;this.stones=[];this.chessData=null;this.robotConfig={black:false,white:false};this.robot=new Robot(this);this.rule=new Rule(this);this.capturedPos=null;this.dragOffset=null;this.selectedCell=null;this.onRequestRedraw=null;this.syncToChessData()}Chessboard.prototype={syncToChessData:function(f,d){if(arguments.length===2){var g=f.row;var c=f.col;this.chessData[g][c]=d}this.chessData=[];for(var e=0;e<Config.Board.size;e++){this.chessData[e]=[];for(var b=0;b<Config.Board.size;b++){this.chessData[e][b]=0}}for(var e=0;e<this.stones.length;e++){var g=this.stones[e].row;var c=this.stones[e].col;var a=e%2===0;this.chessData[g][c]=a?1:2}},reset:function(){this.stones=[];this.syncToChessData();this.robotConfig={black:false,white:false};this.rule.reset();this.requestRedraw()},back:function(){if(this.stones.length<=0){return}if(this.robotConfig.black&&this.robotConfig.white){return}else{if(!this.robotConfig.black&&!this.robotConfig.white){var b=this.stones.pop();this.syncToChessData(b,0)}else{if(this.stones.length>=2){var b=this.stones.pop();this.syncToChessData(b,0);b=this.stones.pop();this.syncToChessData(b,0)}}}if(this.stones.length>0){var a=this.stones[this.stones.length-1];this.selectedCell={row:a.row,col:a.col}}this.rule.syncStatus();this.requestRedraw()},isBlack:function(){return this.stones.length%2===0},putStone:function(d,a){var c=this;if(this.rule.isGameOver()){return}var b={row:d,col:a};this.selectedCell=b;this.stones.push(b);var e=this.isBlack()?2:1;this.syncToChessData(b,e);this.rule.syncStatus(d,a,e);this.requestRedraw();if(!this.rule.isGameOver()){setTimeout(function(){c.robotPlay()},100)}},robotPlay:function(){if((!this.robotConfig.black&&this.isBlack())||(!this.robotConfig.white&&!this.isBlack())){return}if(this.stones.length<=0){var d=Math.floor(Config.Board.size/2);this.putStone(d,d)}else{var a=this.robot.getPosition();if(a.length===2&&a[0]!==undefined&&a[1]!==undefined){var c=a[0];var b=a[1];this.putStone(c,b)}}},setRobot:function(a,b){this.robotConfig[a]=b;if(this.robotConfig.black||this.robotConfig.white){this.robotPlay()}},setPaintingArea:function(c,b,a){this.left=c;this.top=b;this.unitSize=Math.floor(a/Config.Board.size);this.halfSize=Math.floor(a/Config.Board.size/2);this.width=this.unitSize*Config.Board.size-1;this.height=this.unitSize*Config.Board.size-1},render:function(a){a.save();a.translate(this.left,this.top);this.renderChessboard(a);this.renderStones(a);this.renderHighlight(a);this.renderResult(a);a.restore()},renderChessboard:function(b){var c={left:this.halfSize,top:this.halfSize,right:this.width-this.halfSize,bottom:this.height-this.halfSize};b.beginPath();for(var a=0;a<Config.Board.size;a++){b.antiFuzzyLine(c.left,c.top+this.unitSize*a,c.right,c.top+this.unitSize*a);b.antiFuzzyLine(c.left+this.unitSize*a,c.top,c.left+this.unitSize*a,c.bottom)}b.lineWidth=1;b.strokeStyle=Config.Board.stroke;b.stroke()},renderStones:function(c){for(var b=0;b<this.stones.length;b++){var f=this.stones[b].row;var a=this.stones[b].col;var e=a*this.unitSize;var d=f*this.unitSize;c.drawStone(b%2==0,e,d,this.halfSize)}},renderHighlight:function(c){if(this.selectedCell){var f=this.selectedCell.col*this.unitSize;var e=this.selectedCell.row*this.unitSize;var b=f+this.unitSize;var a=e+this.unitSize;var d=Math.floor(this.unitSize/4);c.save();c.beginPath();c.moveTo(f,e+d);c.lineTo(f,e);c.lineTo(f+d,e);c.moveTo(b-d,e);c.lineTo(b,e);c.lineTo(b,e+d);c.moveTo(b,a-d);c.lineTo(b,a);c.lineTo(b-d,a);c.moveTo(f+d,a);c.lineTo(f,a);c.lineTo(f,a-d);c.lineWidth=2;c.strokeStyle=Config.Selected.stroke;c.stroke();c.restore()}},renderResult:function(b){if(this.rule.isGameOver()){var a=this.rule.result;var f=a[0]*this.unitSize+this.halfSize;var e=a[1]*this.unitSize+this.halfSize;var d=a[2]*this.unitSize+this.halfSize;var c=a[3]*this.unitSize+this.halfSize;b.save();b.beginPath();b.moveTo(e,f);b.lineTo(c,d);b.lineWidth=this.halfSize/2;b.strokeStyle=Config.Board.resultStyle;b.stroke();b.restore()}},onCapture:function(b,a){this.capturedPos={left:b,top:a};this.setSelectedCell(b,a)},onDrag:function(b,a){if(!this.capturedPos){return}if(!this.dragOffset){var c=Math.pow(b-this.capturedPos.left,2)+Math.pow(a-this.capturedPos.top,2);if(c>=Math.pow(Config.Selected.dragSensitive*this.unitSize,2)){this.dragOffset={left:b-this.capturedPos.left,top:a-this.capturedPos.top}}}else{this.setSelectedCell(b-this.dragOffset.left,a-this.dragOffset.top)}},onRelease:function(b,a){this.capturedPos=null;this.dragOffset=null;if(this.selectedCell&&!this.hasStone(this.selectedCell.row,this.selectedCell.col)){this.putStone(this.selectedCell.row,this.selectedCell.col)}},setSelectedCell:function(f,e){var a=this.selectedCell?this.selectedCell.row:null;var c=this.selectedCell?this.selectedCell.col:null;if(f<this.left||f>this.left+this.width||e<this.top||e>this.top+this.height){this.selectedCell=null}else{this.selectedCell=this.posToCell(f,e)}var b=this.selectedCell?this.selectedCell.row:null;var d=this.selectedCell?this.selectedCell.col:null;if(b!=a||d!=c){this.requestRedraw()}},posToCell:function(b,a){return{col:Math.floor((b-this.left)/this.unitSize),row:Math.floor((a-this.top)/this.unitSize)}},hasStone:function(c,a){for(var b=0;b<this.stones.length;b++){if(c===this.stones[b].row&&a===this.stones[b].col){return true}}return false},requestRedraw:function(){if(typeof this.onRequestRedraw=="function"){this.onRequestRedraw()}}};function $(){var c=new Array();for(var b=0;b<arguments.length;b++){var a=arguments[b];if(typeof a=="string"){a=document.getElementById(a)}if(arguments.length==1){return a}c.push(a)}return c}Element.prototype.createChild=function(a,c,d){var b=document.createElement(a);this.appendChild(b);if(c){for(key in c){b.setAttribute(key,c[key])}}if(d){b.innerHTML=d}return b};Element.prototype.hasClassName=function(b){return new RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)").test(this.className)};Element.prototype.addClassName=function(b){if(!this.hasClassName(b)){this.className=[this.className,b].join(" ")}};Element.prototype.removeClassName=function(c){if(this.hasClassName(c)){var d=this.className;this.className=d.replace(new RegExp("(?:^|\\s+)"+c+"(?:\\s+|$)","g")," ")}};var canvasPrototype=window.CanvasRenderingContext2D&&CanvasRenderingContext2D.prototype;canvasPrototype.antiFuzzyLine=function(b,d,a,c){if(this.lineWidth%2==1){b-=0.5;d-=0.5;a-=0.5;c-=0.5}this.moveTo(b,d);this.lineTo(a,c)};canvasPrototype.drawStone=function(c,b,g,d){var a=b+d;var f=g+d;this.save();this.beginPath();this.arc(a,f,d-2,0,2*Math.PI);this.closePath();var e=this.createRadialGradient(a+2,f-2,d-2,a+2,f-2,0);if(c){e.addColorStop(0,"#0A0A0A");e.addColorStop(1,"#636766")}else{e.addColorStop(0,"#D1D1D1");e.addColorStop(1,"#F9F9F9")}this.fillStyle=e;this.fill();this.restore()};canvasPrototype.fillTextEx=function(e,b,g,c,f){this.save();var a=b;if(c!="left"){var d=this.measureText(e).width;if(c=="center"){a-=d/2}else{if(c=="right"){a-=d}}}this.textBaseline=f;this.fillText(e,a,g);this.restore()};var Config={Canvas:{margin:0,padding:10,fill:"RGBA(222, 237, 247, 0.3)"},Board:{size:15,stroke:"RGBA(200, 200, 200, 0.8)",resultStyle:"RGBA(0, 255, 0, 0.5)"},Selected:{stroke:"RGBA(255, 0, 0, 0.5)",dragSensitive:3},Button:{size:38,margin:28}};function Rule(a){this.chessBoard=a;this.result=null}Rule.prototype={syncStatus:function(h,c,g){this.result=null;if(arguments.length===0){return}var f=this.chessBoard.chessData;var e=c;while(e-1>=0&&f[h][e-1]===g){e--}var d=c;while(d+1<Config.Board.size&&f[h][d+1]===g){d++}if(d-e>=4){this.result=[h,e,h,d];return}var b=h;while(b-1>=0&&f[b-1][c]===g){b--}var a=h;while(a+1<Config.Board.size&&f[a+1][c]===g){a++}if(a-b>=4){this.result=[b,c,a,c];return}b=h;e=c;while(b-1>=0&&e-1>=0&&f[b-1][e-1]===g){b--;e--}a=h;d=c;while(a+1<Config.Board.size&&d+1<Config.Board.size&&f[a+1][d+1]===g){a++;d++}if(a-b>=4){this.result=[b,e,a,d];return}b=h;e=c;while(b+1<Config.Board.size&&e-1>=0&&f[b+1][e-1]===g){b++;e--}a=h;d=c;while(a-1>=0&&d+1<Config.Board.size&&f[a-1][d+1]===g){a--;d++}if(d-e>=4){this.result=[b,e,a,d];return}},reset:function(){this.result=null},isGameOver:function(){return this.result!==null}};function Robot(a){this.chessBoard=a}Robot.prototype={getPosition:function(){var c=new Array(2);var d=0;for(var b=0;b<15;b++){for(var e=0;e<15;e++){if(this.chessBoard.chessData[b][e]==0){if(this.judge(b,e)>d){d=this.judge(b,e);c[0]=b;c[1]=e}}}}return c},judge:function(e,g){var f=parseInt(this.leftRight(e,g,1))+parseInt(this.topBottom(e,g,1))+parseInt(this.rightBottom(e,g,1))+parseInt(this.rightTop(e,g,1))+100;var d=parseInt(this.leftRight(e,g,2))+parseInt(this.topBottom(e,g,2))+parseInt(this.rightBottom(e,g,2))+parseInt(this.rightTop(e,g,2));var c=f+d;return c},leftRight:function(k,h,e){var a=0;var b=0;var g=0;var f=new Array(15);for(var d=0;d<15;d++){f[d]=new Array(15);for(var c=0;c<15;c++){f[d][c]=this.chessBoard.chessData[d][c]}}f[k][h]=e;for(var d=k;d>=0;d--){if(f[d][h]==e){g++}else{if(f[d][h]==0){b+=1;d=-1}else{a+=1;d=-1}}}for(var d=k;d<=14;d++){if(f[d][h]==e){g++}else{if(f[d][h]==0){b+=1;d=100}else{a+=1;d=100}}}g-=1;return this.model(g,a)},topBottom:function(k,h,e){var a=0;var b=0;var g=0;var f=new Array(15);for(var d=0;d<15;d++){f[d]=new Array(15);for(var c=0;c<15;c++){f[d][c]=this.chessBoard.chessData[d][c]}}f[k][h]=e;for(var d=h;d>=0;d--){if(f[k][d]==e){g++}else{if(f[k][d]==0){b+=1;d=-1}else{a+=1;d=-1}}}for(var d=h;d<=14;d++){if(f[k][d]==e){g++}else{if(f[k][d]==0){b+=1;d=100}else{a+=1;d=100}}}g-=1;return this.model(g,a)},rightBottom:function(k,h,e){var a=0;var b=0;var g=0;var f=new Array(15);for(var d=0;d<15;d++){f[d]=new Array(15);for(var c=0;c<15;c++){f[d][c]=this.chessBoard.chessData[d][c]}}f[k][h]=e;for(var d=k,c=h;d>=0&&c>=0;){if(f[d][c]==e){g++}else{if(f[d][c]==0){b+=1;d=-1}else{a+=1;d=-1}}d--;c--}for(var d=k,c=h;d<=14&&c<=14;){if(f[d][c]==e){g++}else{if(f[d][c]==0){b+=1;d=100}else{a+=1;d=100}}d++;c++}g-=1;return this.model(g,a)},rightTop:function(k,h,e){var a=0;var b=0;var g=0;var f=new Array(15);for(var d=0;d<15;d++){f[d]=new Array(15);for(var c=0;c<15;c++){f[d][c]=this.chessBoard.chessData[d][c]}}f[k][h]=e;for(var d=k,c=h;d>=0&&c<=14;){if(f[d][c]==e){g++}else{if(f[d][c]==0){b+=1;d=-1}else{a+=1;d=-1}}d--;c++}for(var d=k,c=h;d<=14&&c>=0;){if(f[d][c]==e){g++}else{if(f[d][c]==0){b+=1;d=100}else{a+=1;d=100}}d++;c--}g-=1;return this.model(g,a)},model:function(g,b){var f=0;var e=1;var a=1500;var d=4000;var h=10000;var c=100000;if(g==1&&b==1){return e}else{if(g==2){if(b==0){return a}else{if(b==1){return e}else{return f}}}else{if(g==3){if(b==0){return d}else{if(b==1){return a}else{return f}}}else{if(g==4){if(b==0){return h}else{if(b==1){return d}else{return f}}}else{if(g==5){return c}}}}}return f}};